<div class="row">
  <div class="col-md-6 mx-auto">
    <h2 class="mb-4">Create Post</h2>
    <div class="card">
      <div class="card-body">
        <form (ngSubmit)="onSubmit()">
          <div class="mb-3">
            <textarea 
              class="form-control" 
              rows="4" 
              placeholder="What's on your mind?"
              [(ngModel)]="postData.content"
              name="content"
              required></textarea>
          </div>
          
          <div class="mb-3">
            <label class="form-label">Attach Media</label>
            <input 
              type="file" 
              class="form-control" 
              accept="image/*,video/*"
              (change)="onFileSelected($event)">
          </div>
          
          <!-- File Preview -->
          <div class="mb-3" *ngIf="selectedFile && previewUrl">
            <div class="position-relative">
              <button 
                type="button" 
                class="btn btn-sm btn-danger position-absolute top-0 end-0 m-2"
                (click)="removeFile()"
                style="z-index: 10;">
                Ã—
              </button>
              
              <!-- Image Preview -->
              <img 
                *ngIf="isImage(selectedFile)" 
                [src]="previewUrl" 
                class="img-fluid rounded" 
                style="max-height: 300px;"
                alt="Preview">
              
              <!-- Video Preview -->
              <video 
                *ngIf="isVideo(selectedFile)" 
                [src]="previewUrl" 
                class="img-fluid rounded" 
                style="max-height: 300px;"
                controls>
                Your browser does not support the video tag.
              </video>
            </div>
          </div>
          
          <div class="mb-3" *ngIf="errorMessage">
            <div class="alert alert-danger">{{errorMessage}}</div>
          </div>
          
          <div class="d-flex gap-2">
            <button 
              type="submit" 
              class="btn btn-primary"
              [disabled]="isLoading || !postData.content.trim()">
              <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2"></span>
              {{isLoading ? 'Posting...' : 'Post'}}
            </button>
            <button 
              type="button" 
              class="btn btn-secondary"
              (click)="onCancel()">
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>